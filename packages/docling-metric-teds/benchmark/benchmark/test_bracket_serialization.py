from teds import TableTree

BRACKETS: list[str] = [
    '{"tag": table{"tag": tbody{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}}}',
    '{"tag": table{"tag": tbody{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}}}',
    '{"tag": table{"tag": tbody{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}}}',
    '{"tag": table{"tag": tbody{"tag": tr{"tag": td, "colspan": 1, "rowspan": 2, "text": []}{"tag": td, "colspan": 1, "rowspan": 2, "text": []}{"tag": td, "colspan": 2, "rowspan": 1, "text": []}{"tag": td, "colspan": 2, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 2, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}{"tag": tr{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}{"tag": td, "colspan": 1, "rowspan": 1, "text": []}}}}',
]


def test_braket_serialization():
    r"""
    1. Use the TableTree.from_bracket() method to create a tree from a bracket strings
    2. Then serialize the created tree using the TableTree.to_bracket() method
    3. Finally, compare the original bracket string with the serialized string to ensure they are the same.
    """

    for bracket_str in BRACKETS:
        # Step 1: Parse the bracket string into a TableTree
        tree = TableTree.from_bracket(bracket_str)

        # Step 2: Serialize the tree back to bracket notation
        serialized_str = tree.bracket()

        # Step 3: Compare the original and serialized strings
        assert bracket_str == serialized_str, (
            f"Bracket serialization mismatch!\n"
            f"Original:   {bracket_str}\n"
            f"Serialized: {serialized_str}"
        )

    print(f"âœ“ All {len(BRACKETS)} bracket serialization tests passed!")


if __name__ == "__main__":
    test_braket_serialization()
